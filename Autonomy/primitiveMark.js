define([],function(){function e(e){var l=this;this._globe=e;this._viewer=e._viewer;this._globeId=e._globeId;this._selectMark;this._selectMarkShow=false;this._isHandler=false;this._billboards=l._viewer.scene.primitives.add(new Cesium.BillboardCollection);this._labels=l._viewer.scene.primitives.add(new Cesium.LabelCollection);if(l._isHandler){this._handler=new Cesium.ScreenSpaceEventHandler(this._viewer.scene.canvas);this._handler.setInputAction(function(e){var r=l._viewer.scene.pick(e.position);if(Cesium.defined(r)){if(r.id){if(r.primitive._leftClick){r.primitive._leftClick(r.primitive)}}}},Cesium.ScreenSpaceEventType.LEFT_CLICK);this._handler.setInputAction(function(e){var r=l._globe._viewer.scene.pick(e.endPosition);if(Cesium.defined(r)&&r!=l._selectMark){if(r.id){if(l._selectMark){l._selectMark.show=l._selectMarkShow}l._selectMark=l.getLabelById(r.id);l._selectMarkShow=l._selectMark.show;l._selectMark.show=true}}else if(l._selectMark){l._selectMark.show=false;l._selectMark=null}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}else if(l._handler){l._handler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);l._handler.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE)}}e.prototype.add=function(e){var r=this;var l=new Cesium.PinBuilder;var i=e.width?parseInt(e.width):30;var a=e.height?parseInt(e.height):30;var o=e.lon?parseFloat(e.lon):0;var t=e.lat?parseFloat(e.lat):0;var s=e.alt?parseFloat(e.alt):0;var n=e.color?e.color:Cesium.Color.YELLOW;var c=e.horizontalOrigin?e.horizontalOrigin:Cesium.HorizontalOrigin.CENTER;var b=e.verticalOrigin?e.verticalOrigin:Cesium.VerticalOrigin.CENTER;var v=e.url?e.url:l.fromColor(n,48).toDataURL();var d=e.leftClick?e.leftClick:null;var _=e.rightClick?e.rightClick:null;var u=e.label?e.label:"";var f=e.labelSize?e.labelSize:14;var h=e.labelFamily?e.labelFamily:"sans-serif";var C=e.mousemoveShowLabel!==false;var m=e.nearFarScalarImage?e.nearFarScalarImage:null;var g=e.nearFarScalarLabel?e.nearFarScalarLabel:null;var p=new Cesium.NearFarScalar(150,1,15e5,1);var S=new Cesium.NearFarScalar(150,1,15e5,1);if(m&&m.length==4){p=new Cesium.NearFarScalar(m[0],m[1],m[2],m[3])}if(g&&g.length==4){S=new Cesium.NearFarScalar(g[0],g[1],g[2],g[3])}var w;if(e.labelColor){if(e.labelColor.indexOf("#")!=-1){w=Cesium.Color.fromCssColorString(e.labelColor)}else{w=e.labelColor}}else{w=Cesium.Color.WHITE}var k=e.labelShow!==false;var I=false;if(e.showBackground){I=e.showBackground}var E;if(e.backgroundColor){if(e.backgroundColor.indexOf("#")!=-1){E=Cesium.Color.fromCssColorString(e.backgroundColor)}else{E=e.backgroundColor}}else{E=Cesium.Color.BLUE}var O;var y;var L=e.clampMode?e.clampMode:1;if(L==0){O=Cesium.HeightReference.RELATIVE_TO_GROUND;y=Cesium.Cartesian3.fromDegrees(o,t)}else{O=Cesium.HeightReference.NONE;y=Cesium.Cartesian3.fromDegrees(o,t,s)}var M={show:true,position:y,heightReference:O,horizontalOrigin:c,verticalOrigin:b,image:v,id:u.toString(),width:i,height:a,scaleByDistance:p,disableDepthTestDistance:Number.POSITIVE_INFINITY,leftClick:d,rightClick:_};var u={id:u.toString(),show:k,position:y,text:u.toString(),font:f+"pt "+h,fillColor:w,showBackground:I,backgroundColor:E,pixelOffset:new Cesium.Cartesian2(i/2,0),horizontalOrigin:Cesium.HorizontalOrigin.LEFT,verticalOrigin:Cesium.VerticalOrigin.BASELINE,heightReference:O,distanceDisplayCondition:Number.POSITIVE_INFINITY,scaleByDistance:S};r._billboards.add(M);r._labels.add(u)};e.prototype.removeAll=function(){var e=this;e._billboards.removeAll();e._labels.removeAll()};e.prototype.remove=function(e){var r=this;var l=e.billboard;var i=e.label;if(l){r._billboards.remove(l)}if(i){r._labels.remove(i)}};e.prototype.removeBillboard=function(e){var r=this;var l=false;if(e){l=r._billboards.remove(e)}return l};e.prototype.removeLabel=function(e){var r=this;var l=false;if(e){l=r._labels.remove(e)}return l};e.prototype.removeBillboardById=function(e){var r=this;var l=true;for(var i=r._billboards._billboards.length-1;i>=0;i--){if(r._billboards._billboards[i].id==e){l=r._billboards.remove(r._billboards._billboards[i])}}return l};e.prototype.removeLabelById=function(e){var r=this;var l=true;for(var i=r._labels._labels.length-1;i>=0;i--){if(r._labels._labels[i].id==e){l=r._labels.remove(r._labels._labels[i])}}return l};e.prototype.getBillboardById=function(e){var r=this;var l=null;for(var i=r._billboards._billboards.length-1;i>=0;i--){if(r._billboards._billboards[i].id==e){l=r._billboards._billboards[i]}}return l};e.prototype.getLabelById=function(e){var r=this;var l=null;for(var i=r._labels._labels.length-1;i>=0;i--){if(r._labels._labels[i].id==e){l=r._labels._labels[i]}}return l};return e});